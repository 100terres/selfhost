#!/usr/bin/env bash

# Always first
docker compose --file services/core/docker-compose.yml up -d --remove-orphans

docker compose --file services/ghostfolio/docker-compose.yml up -d --remove-orphans
docker compose --file services/personal-mastodon-instance/docker-compose.yml up -d --remove-orphans
docker compose --file services/professional-mastodon-instance/docker-compose.yml up -d --remove-orphans
docker compose --file services/forgejo-runner/docker-compose.yml up -d --remove-orphans
docker compose --file services/self-hosting-demo/docker-compose.yml up -d --remove-orphans

read -s -p "KeePass Password: " PASSWORD

cd services/forgejo
echo "up: forgejo"
FNOX_KEEPASS_PASSWORD=$PASSWORD fnox exec --if-missing error -- docker compose up -d --remove-orphans
cd ../..
